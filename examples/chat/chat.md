## 聊天服务器 

主要了解如何分包

聊天服务的特点，连接之间的数据有交流，从a连接到的数据要发给b连接

## 考虑的问题

1. 如何一个程序处理多个连接

2. 如何防止串话

3. b可能随时断开连接，新建立的连接c可能恰好复用b的文件描述符，那么a会不会错误的把消息发个c

4. 遇到恶意客户端， 0x00, 0x00, 0x00, 0x09, 'M', 'I','T', 'S', 'K', 我头部写8个，但是其实发了5个，这样就会阻塞，没办法处理了

如何处理错误消息?

- 还会带上一个应用层的校验信息，比如CRC32校验

校验错误，这个消息就是错误消息

- 服务端应该有空闲断开功能

在一定时间没有收到客户端消息，就断开

## codec 

运输层中，TCP是字节流，是无边界的

应用层需要编解码器去分包







